var Clover=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.cardElementTypes=["CARD","CARD_CVV","CARD_DATE","CARD_NUMBER","CARD_POSTAL_CODE","CARD_STREET_ADDRESS","PAYMENT_REQUEST_BUTTON"],t.localeSupported=["en","en-CA","fr-CA"],t.BASE_HOST=r.determineEnv().origin;var o=t.BASE_HOST+"/widget.html";t.buildUrl=function(e,t,n,r,i,a,s){var l={baseOrigin:e,element:t,origin:document.location.origin};n&&(l.apiKey=n),r&&(l.mId=r),i&&(l.styles=JSON.stringify(i)),a&&(l.paymentRequest=JSON.stringify(a)),s&&(l.locale=s);var d=Object.keys(l).map(function(e){return e+"="+encodeURIComponent(l[e])}).join("&");return o+"?"+d}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o,i,a=n(0);t.initElemMaps=function(){o=new Map;var e={change:null,focus:null,blur:null,paymentMethod:null,paymentMethodStart:null,paymentMethodEnd:null};(i=new Map).set("CARD_NUMBER",e),i.set("CARD_DATE",e),i.set("CARD_CVV",e),i.set("CARD_POSTAL_CODE",e),i.set("CARD_STREET_ADDRESS",e),i.set("PAYMENT_REQUEST_BUTTON",e)},t.registerElementIdMapping=function(e,t){o.set(e,t)},t.registerElementEventListener=function(e,t,n){if(!["blur","change","focus","paymentMethod","paymentMethodStart","paymentMethodEnd"].includes(t))throw new Error("This event is not yet supported.");if(i.has(e)&&i.get(e)[t])throw new Error(t+" event is already registered on "+e.toString()+".");var o=i.get(e),a=Object.keys(o).reduce(function(e,o){var i;return o===t?r(r({},e),((i={})[t]=n,i)):e},r({},o));i.set(e,a)},t.removeElementEventListener=function(e,t){if(!i.has(e)||!i.get(e)[t])throw new Error(t+" is not registered on "+e.toString()+".");var n=i.get(e),o=Object.keys(n).reduce(function(e,n){var o;return n===t?r(r({},e),((o={})[t]=null,o)):e},r({},n));i.set(e,o)},t.onBlurEvent=function(e){if(e&&e.data){var t=e.data,n=t.realTimeFormState,r=t.elementType;i.has(r)&&i.get(r).blur&&i.get(r).blur(n)}},t.onFocusEvent=function(e){if(e&&e.data){var t=e.data,n=t.realTimeFormState,r=t.elementType;i.has(r)&&i.get(r).focus&&i.get(r).focus(n)}},t.onTokenizedWallet=function(e){if(e&&e.data){var t=e.data,n=t.responseData,r=t.elementType;i.has(r)&&i.get(r).paymentMethod&&i.get(r).paymentMethod(n)}},t.onWalletWindowOpen=function(e){if(e&&e.data){var t=e.data,n=t.responseData,r=t.elementType;i.has(r)&&i.get(r).paymentMethodStart&&i.get(r).paymentMethodStart(n)}},t.onWalletWindowClose=function(e){if(e&&e.data){var t=e.data,n=t.responseData,r=t.elementType;i.has(r)&&i.get(r).paymentMethodEnd&&i.get(r).paymentMethodEnd(n)}},t.onChangeEvent=function(e){if(e&&e.data){var t=e.data,n=t.realTimeFormState,r=t.elementType;i.has(r)&&i.get(r).change&&i.get(r).change(n)}},t.resizeFrame=function(e){var t,n;if(e){var r=o.get(e.sender);if(r){var i=document.getElementById(r);if(null===(n=null===(t=i)||void 0===t?void 0:t.firstElementChild)||void 0===n||!n.nodeName||"IFRAME"!==i.firstElementChild.nodeName)throw new Error("Failed to find or resize iframe for "+r);var a=i.firstElementChild,s=e.data;a.style.visibility="visible",a.width=s.width.toString(),a.height=s.height.toString()}}},t.renderFooter=function(e,t){if(!document.getElementsByClassName("clover-footer")[0]){var n=document.createElement("div");if(n.className="clover-footer",n.setAttribute("style","padding: 18px 24px; background-color: #F4F5F5; border-radius: 0 0 14px 14px; text-align: center"),e){var r=document.createElement("div");r.className="clover-secure-payments",r.innerHTML='<img style="margin: -2px 8px;max-width: 12px;" src="'+a.BASE_HOST+'/assets/icons/lock.png"/>Secure Payments Powered by <b>Clover</b><img style="margin: -4px 8px;max-width: 20px;"src="'+a.BASE_HOST+'/assets/icons/clover-symbol.png"/>',r.setAttribute("style","color: #B1B6B8; font-family: Roboto; font-size: 14px; font-weight: bold; line-height: 16px;"),n.appendChild(r)}if(t){var o=document.createElement("a"),i=document.createTextNode("Privacy Policy");o.className="clover-privacy-link",o.appendChild(i),o.title="Privacy Policy",o.href="https://www.clover.com/privacy-policy",o.setAttribute("style","font-family: Roboto; font-size: 14px; font-weight: bold; line-height: 16px;"),n.appendChild(o)}n.hasChildNodes&&document.body.appendChild(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=function(e){void 0===e&&(e=10);for(var t="0123456789abcdefghijklmnopqrstuvwxyz",n="",r=e;r>0;--r)n+=t[Math.floor(Math.random()*t.length)];return n},t.bindEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)};var r=function(){function e(e,t,n,r,o){this.parentOrigin=e,this.childrenOrigin=t,this.senderType=n,this.callStack=o,r&&(this.intermediateWindow=r),this.isParent="PARENT"===n}return e.prototype.sendMessageToParent=function(e,t,n,r){if(this.isParent)throw new Error("Cannot send message from parent to itself.");var o=this.createMessage(["PARENT"],e,t,n,r);return this.sendMessage(o,this.parentOrigin,window.parent)},e.prototype.sendMessageToChild=function(e,t,n,r,o){if(void 0===o&&(o="en"),!this.isParent)throw new Error("Can only use this from parent.");if(!this.intermediateWindow)throw new Error("Intermediate window is undefined.");var i=this.createMessage(["INTERMEDIATE"],e,t,n,r,o);return this.sendMessage(i,this.childrenOrigin,this.intermediateWindow)},e.prototype.sendMessageToChildren=function(e,t,n,r,o){if(this.isParent)throw new Error("Can only use this from child.");var i=this.createMessage(e,t,n,r,o);return this.sendMessage(i,this.childrenOrigin,window.parent.frames,!0)},e.prototype.sendMessage=function(e,t,n,r){if(void 0===r&&(r=!1),r)for(var o=0;o<n.length;o++)n[o].postMessage(JSON.stringify(e),t);else n.postMessage(JSON.stringify(e),t);if(e.shouldDefer&&this.callStack){var i=e.hash;return this.callStack.defer(i)}},e.prototype.createMessage=function(e,n,r,o,i,a){return void 0===r&&(r=t.randomString()),void 0===o&&(o={}),void 0===i&&(i=!1),void 0===a&&(a="en"),{functionToInvoke:n,hash:r,sender:this.senderType,recipients:e,data:o,shouldDefer:i,locale:a}},e}();t.MessageSender=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Map,o={size:function(){return r.size},get:function(e){return r.get(e)},delete:function(e){return r.delete(e)},defer:function(e){var t={};return t.promise=new Promise(function(e){t.resolve=e}),r.set(e,t),t.promise}};Object.freeze(o),t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.determineEnv=function(){if(r)return r;try{var e=document.getElementsByTagName("script"),t=Array.from(e).filter(function(e){return e.src.indexOf("clover.com/sdk.js")>0})[0].src;r=new URL(t)}catch(e){console.warn("Could not determine environment"),r=new URL("https://checkout.sandbox.clover.com")}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(4),i=n(1),a=function(){function e(e,t,n,r,o){this.mounted=!1,t&&(this.paymentReqData=t.paymentReqData,delete t.paymentReqData,this.styles=t),this.elementType=e,this.apiKey=n,this.merchantId=r,this.locale=null!==o&&void 0!==o?o:"en"}return e.prototype.mount=function(e){var t=document.querySelector(e);if(!t)throw new Error("Unable to find a dom element for selector "+e);this.mountNode(t)},e.prototype.mountNode=function(e){if(!this.mounted){var t=o.determineEnv();this.mountedIFrame=document.createElement("iframe"),this.mountedIFrame.style.border="0",this.mountedIFrame.style.height="100%",this.mountedIFrame.style.width="100%",this.mountedIFrame.title=this.elementType.split("_").join(" "),"PAYMENT_REQUEST_BUTTON"===this.elementType&&(this.mountedIFrame.allowPaymentRequest=!0,this.mountedIFrame.allow="payment"),this.paymentReqData&&(this.paymentReqData.merchantHostname=window.location.hostname),this.mountedIFrame.src=r.buildUrl(t.origin,this.elementType,this.apiKey,this.merchantId,this.styles,this.paymentReqData,this.locale),e.appendChild(this.mountedIFrame),this.mounted=!0;var n=e.getAttribute("id");n&&i.registerElementIdMapping(this.elementType,n)}},e.prototype.addEventListener=function(e,t){if("string"!=typeof e)throw new Error("When adding an event listener, the first argument should be a string event name.");if("function"!=typeof t)throw new Error("When adding an event listener, the second argument should be a function callback.");i.registerElementEventListener(this.elementType,e,t)},e.prototype.removeEventListener=function(e){if("string"!=typeof e)throw new Error("When removing an event listener, the first argument should be a string event name.");i.removeElementEventListener(this.elementType,e)},e}();t.CloverElement=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["AMEX","DISCOVER","INTERAC","JCB","MASTERCARD","VISA"],o=["PAN_ONLY","CRYPTOGRAM_3DS"];t.getGooglePaymentsConfiguration=function(e){var t,n,i;return{environment:(null===(t=e)||void 0===t?void 0:t.testMode)?"TEST":"PRODUCTION",apiVersion:2,apiVersionMinor:0,merchantInfo:{merchantId:"BCR2DN6TRO2OTLBT",merchantName:(i=null===(n=e)||void 0===n?void 0:n.merchantName,null!==i&&void 0!==i?i:"Clover merchant"),merchantOrigin:"www.example.com"},allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:o,allowedCardNetworks:r},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"clover",gatewayMerchantId:"12345678901234567890"}}}]}},t.createPaymentRequest=function(e){var n=[{supportedMethods:"https://google.com/pay",data:t.getGooglePaymentsConfiguration(e)}];n.push({supportedMethods:"basic-card",data:{supportedNetworks:["visa","mastercard"],supportedTypes:["debit","credit"]}});var r=e.currency,o=e.total,i=o.label,a=o.amount,s=e.requestPayerEmail,l=e.requestPayerName;return new PaymentRequest(n,{total:{label:i,amount:{currency:r||"usd",value:a}}},{requestPayerEmail:s||!0,requestPayerName:l||!0})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=n(0),s=o(n(3)),l=n(2),d=function(e){function t(t,n){var r=e.call(this,"INTERMEDIATE")||this;return r.apiKey=t,r.merchantId=n,r}return r(t,e),t.prototype.mountAndInit=function(e){this.mountNode(e),this.messageSender=new l.MessageSender(document.location.origin,a.BASE_HOST,"PARENT",this.mountedIFrame.contentWindow,s.default)},t.prototype.onSubmit=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t="en"),!this.mountedIFrame)throw new Error("MessageElement should be mounted.");var n=l.randomString();return this.messageSender.sendMessageToChild("postTokenRequest",n,{isMultipayToken:e},!0,t)},t}(i.CloverElement);t.MessageElement=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0),i=n(1),a=function(){function e(e,t,n){this.apiKey=e,this.merchantId=t,this.locale=n}return e.getInstance=function(t,n,r,o,a){return e.instance||(e.instance=new e(t,n,a),i.renderFooter(r,o)),e.instance},e.prototype.create=function(e,t){if(!e)throw new Error("Enter a valid element such as CARD_CVV, CARD_DATE, CARD_NUMBER, CARD_POSTAL_CODE, CARD_STREET_ADDRESS");if(null!=t&&null==t.paymentReqData&&"PAYMENT_REQUEST_BUTTON"===e&&this.apiKey)throw new Error("PaymentRequest object is invalid, apiKey-"+this.apiKey);if(!o.cardElementTypes.includes(e))throw new Error("Enter a valid element.");return new r.CloverElement(e,t,this.apiKey,this.merchantId,this.locale)},e}();t.Element=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(7),a=n(0),s=r(n(3)),l=n(2),d=n(6),u=n(1),c=function(){function e(e,t){if(!e)throw new Error("Apikey is required");this.apikey=e,this.options=t,this.bindMessageHelper()}return e.prototype.bindMessageHelper=function(){l.bindEvent(window,"message",function(e){var t=e.data;if(e.origin===a.BASE_HOST){var n=JSON.parse(t),r=n.data,o=n.functionToInvoke,i=n.hash;if(s.default.size()>0){var l=s.default.get(i);if(l)return s.default.delete(i),l.resolve(r)}["resizeFrame","onBlurEvent","onChangeEvent","onFocusEvent","onTokenizedWallet","onWalletWindowOpen","onWalletWindowClose"].includes(o)&&("resizeFrame"===o?u.resizeFrame(n):"onBlurEvent"===o?u.onBlurEvent(n):"onFocusEvent"===o?u.onFocusEvent(n):"onChangeEvent"===o?u.onChangeEvent(n):"onTokenizedWallet"===o?u.onTokenizedWallet(n):"onWalletWindowOpen"===o?u.onWalletWindowOpen(n):"onWalletWindowClose"===o&&u.onWalletWindowClose(n))}})},e.prototype.elements=function(){var e=this.options||{},t=e.showSecurePayments,n=void 0===t||t,r=e.showPrivacyPolicy,s=void 0===r||r,l=e.merchantId,d=void 0===l?void 0:l,c=e.locale,m=void 0===c?"en":c;u.initElemMaps();var h=document.createElement("div");return h.setAttribute("style","top: 0;position: fixed;height: 1px;width: 1px;pointer-events: none;opacity: 0;"),document.body.appendChild(h),this.messageElement=new i.MessageElement(this.apikey,d),this.messageElement.mountAndInit(h),this.locale=a.localeSupported.includes(m)?m:"en",o.Element.getInstance(this.apikey,d,n,s,this.locale)},e.prototype.createToken=function(e){if(void 0===e&&(e=!1),this.messageElement)return this.messageElement.onSubmit(e,this.locale)},e.prototype.paymentRequest=function(e){return d.createPaymentRequest(e)},e}();e.exports=c}]);
//# sourceMappingURL=sdk.js.map